<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación de Grupos de Investigación</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 1000px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: center;
            border: 1px solid #ccc;
        }
        th {
            background-color: #f2f2f2;
        }
        .input-group {
            display: flex;
            align-items: center;
        }
        .input-group input, .input-group select {
            flex: 1;
            padding: 8px;
            box-sizing: border-box;
            text-align: center;
        }
        .result {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #4caf50;
            border-radius: 8px;
            background-color: #e8f5e9;
        }
    </style>
</head>
<body>
<div class="container">
    <h1 style="text-align: center;">Evaluación de Grupos de Investigación</h1>
    <table>
        <thead>
            <tr>
                <th>Indicadores</th>
                <th>Valor/Ítem</th>
                <th>Valor real</th>
                <th>Puntos/Ítem</th>
                <th>Puntos/Indicador</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #d9ead3;">Publicaciones Científicas</td>
            </tr>
            <tr>
                <td>Q1 JCR</td>
                <td>4,00/P</td>
                <td><input type="number" id="jcrQ1" oninput="updateScores()"></td>
                <td><span id="partial-jcrQ1">0</span></td>
                <td rowspan="4"><span id="total-jcr">0</span></td>
            </tr>
            <tr>
                <td>Q2 JCR</td>
                <td>3,00/P</td>
                <td><input type="number" id="jcrQ2" oninput="updateScores()"></td>
                <td><span id="partial-jcrQ2">0</span></td>
            </tr>
            <tr>
                <td>Q3 JCR</td>
                <td>2,50/P</td>
                <td><input type="number" id="jcrQ3" oninput="updateScores()"></td>
                <td><span id="partial-jcrQ3">0</span></td>
            </tr>
            <tr>
                <td>Q4 JCR</td>
                <td>2,00/P</td>
                <td><input type="number" id="jcrQ4" oninput="updateScores()"></td>
                <td><span id="partial-jcrQ4">0</span></td>
            </tr>
            <tr>
                <td>Q1 SCOPUS</td>
                <td>3,00/P</td>
                <td><input type="number" id="scopusQ1" oninput="updateScores()"></td>
                <td><span id="partial-scopusQ1">0</span></td>
                <td rowspan="4"><span id="total-scopus">0</span></td>
            </tr>
            <tr>
                <td>Q2 SCOPUS</td>
                <td>2,30/P</td>
                <td><input type="number" id="scopusQ2" oninput="updateScores()"></td>
                <td><span id="partial-scopusQ2">0</span></td>
            </tr>
            <tr>
                <td>Q3 SCOPUS</td>
                <td>1,10/P</td>
                <td><input type="number" id="scopusQ3" oninput="updateScores()"></td>
                <td><span id="partial-scopusQ3">0</span></td>
            </tr>
            <tr>
                <td>Q4 SCOPUS</td>
                <td>0,80/P</td>
                <td><input type="number" id="scopusQ4" oninput="updateScores()"></td>
                <td><span id="partial-scopusQ4">0</span></td>
            </tr>
            <tr>
                <td>Revistas sello FECYT</td>
                <td>3,00/P</td>
                <td><input type="number" id="fecyt" oninput="updateScores()"></td>
                <td><span id="partial-fecyt">0</span></td>
                <td><span id="total-fecyt">0</span></td>
            </tr>
            <tr>
                <td>Revistas indexadas Dialnet</td>
                <td>0,40/P</td>
                <td><input type="number" id="dialnet" oninput="updateScores()"></td>
                <td><span id="partial-dialnet">0</span></td>
                <td><span id="total-dialnet">0</span></td>
            </tr>
            <tr>
                <td>Libros en español</td>
                <td>3,50/P</td>
                <td><input type="number" id="books" oninput="updateScores()"></td>
                <td><span id="partial-books">0</span></td>
                <td><span id="total-books">0</span></td>
            </tr>
            <tr>
                <td>Libros en inglés</td>
                <td>4,38/P</td>
                <td><input type="number" id="booksEnglish" oninput="updateScores()"></td>
                <td><span id="partial-booksEnglish">0</span></td>
                <td><span id="total-books">0</span></td>
            </tr>
            <tr>
                <td>Capítulos de libro en español</td>
                <td>1,00/P</td>
                <td><input type="number" id="bookChapters" oninput="updateScores()"></td>
                <td><span id="partial-bookChapters">0</span></td>
                <td><span id="total-bookChapters">0</span></td>
            </tr>
            <tr>
                <td>Capítulos de libro en inglés</td>
                <td>1,25/P</td>
                <td><input type="number" id="bookChaptersEnglish" oninput="updateScores()"></td>
                <td><span id="partial-bookChaptersEnglish">0</span></td>
                <td><span id="total-bookChapters">0</span></td>
            </tr>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #fce5cd;">Captación de Recursos de I+D+i</td>
            </tr>
            <tr>
                <td>Programa Marco de la Unión Europea</td>
                <td>2,00/6000€</td>
                <td><input type="number" id="fundingEU" oninput="updateScores()"></td>
                <td><span id="partial-fundingEU">0</span></td>
                <td rowspan="4"><span id="total-funding">0</span></td>
            </tr>
            <tr>
                <td>Internacional/Nacional</td>
                <td>1,00/6000€</td>
                <td><input type="number" id="fundingInternational" oninput="updateScores()"></td>
                <td><span id="partial-fundingInternational">0</span></td>
            </tr>
            <tr>
                <td>Regional</td>
                <td>0,40/6000€</td>
                <td><input type="number" id="fundingRegional" oninput="updateScores()"></td>
                <td><span id="partial-fundingRegional">0</span></td>
            </tr>
            <tr>
                <td>Convenios con organismos públicos o empresas</td>
                <td>0,40/6000€</td>
                <td><input type="number" id="publicPrivate" oninput="updateScores()"></td>
                <td><span id="partial-publicPrivate">0</span></td>
            </tr>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #fff2cc;">Patentes</td>
            </tr>
            <tr>
                <td>Nacional o Europea</td>
                <td>4,00/PAT</td>
                <td><input type="number" id="patents" oninput="updateScores()"></td>
                <td><span id="partial-patents">0</span></td>
                <td><span id="total-patents">0</span></td>
            </tr>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #fff2cc;">Formación RRHH</td>
            </tr>
            <tr>
                <td>Dirección Tesis defendidas con Doctor Europeo y premio extraordinario</td>
                <td>1,50/T</td>
                <td><input type="number" id="phdThesesAward" oninput="updateScores()"></td>
                <td><span id="partial-phdThesesAward">0</span></td>
                <td rowspan="3"><span id="total-phdTheses">0</span></td>
            </tr>
            <tr>
                <td>Dirección Tesis defendidas con Doctor Europeo y premio extraordinario</td>
                <td>1,00/T</td>
                <td><input type="number" id="phdThesesEuropean" oninput="updateScores()"></td>
                <td><span id="partial-phdThesesEuropean">0</span></td>
            </tr>
            <tr>
                <td>Dirección Tesis defendidas sin mención</td>
                <td>0,50/T</td>
                <td><input type="number" id="phdTheses" oninput="updateScores()"></td>
                <td><span id="partial-phdTheses">0</span></td>
            </tr>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #fce5cd;">Coordinación Grupo</td>
            </tr>
            <tr>
                <td>Mujer</td>
                <td>1,50/COORD</td>
                <td>
                    <select id="femaleLeader" onchange="updateScores()">
                        <option value="no">No</option>
                        <option value="sí">Sí</option>
                    </select>
                </td>
                <td><span id="partial-femaleLeader">0</span></td>
                <td rowspan="2"><span id="total-coordination">0</span></td>
            </tr>
            <tr>
                <td>Joven</td>
                <td>1,50/COORD</td>
                <td>
                    <select id="youngLeader" onchange="updateScores()">
                        <option value="no">No</option>
                        <option value="sí">Sí</option>
                    </select>
                </td>
                <td><span id="partial-youngLeader">0</span></td>
            </tr>
            <tr>
                <td colspan="5" style="text-align: left; background-color: #c9daf8;">Pertenencia a Institutos Universitarios</td>
            </tr>
            <tr>
                <td>Nº de investigadores doctores</td>
                <td>10/GRUPO</td>
                <td>
                    <select id="universityInstitute" onchange="updateScores()">
                        <option value="no">No</option>
                        <option value="sí">Sí</option>
                    </select>
                </td>
                <td><span id="partial-universityInstitute">0</span></td>
                <td><span id="total-universityInstitute">0</span></td>
            </tr>
        </tbody>
    </table>
    <div class="result">
        <h2>Puntuación Final</h2>
        <p id="finalScore">0</p>
    </div>
</div>
<script>
    function updateScores() {
        const fields = [
            { id: 'jcrQ1', multiplier: 4 },
            { id: 'jcrQ2', multiplier: 3 },
            { id: 'jcrQ3', multiplier: 2.5 },
            { id: 'jcrQ4', multiplier: 2 },
            { id: 'scopusQ1', multiplier: 3 },
            { id: 'scopusQ2', multiplier: 2.3 },
            { id: 'scopusQ3', multiplier: 1.1 },
            { id: 'scopusQ4', multiplier: 0.8 },
            { id: 'fecyt', multiplier: 3 },
            { id: 'dialnet', multiplier: 0.4 },
            { id: 'books', multiplier: 3.5 },
            { id: 'booksEnglish', multiplier: 4.38 },
            { id: 'bookChapters', multiplier: 1 },
            { id: 'bookChaptersEnglish', multiplier: 1.25 },
            { id: 'fundingEU', multiplier: 2 / 6000 },
            { id: 'fundingInternational', multiplier: 1 / 6000 },
            { id: 'fundingRegional', multiplier: 0.4 / 6000 },
            { id: 'publicPrivate', multiplier: 0.4 / 6000 },
            { id: 'patents', multiplier: 4 },
            { id: 'phdThesesAward', multiplier: 1.5 },
            { id: 'phdThesesEuropean', multiplier: 1 },
            { id: 'phdTheses', multiplier: 0.5 },
            { id: 'femaleLeader', multiplier: 1.5, isBoolean: true },
            { id: 'youngLeader', multiplier: 1.5, isBoolean: true },
            { id: 'universityInstitute', multiplier: 10, isBoolean: true },
        ];

        let totalScores = {
            jcr: 0,
            scopus: 0,
            fecyt: 0,
            dialnet: 0,
            books: 0,
            booksEnglish: 0,
            bookChapters: 0,
            bookChaptersEnglish: 0,
            funding: 0,
            patents: 0,
            phdTheses: 0,
            coordination: 0,
            universityInstitute: 0,
        };

        fields.forEach(field => {
            const value = field.isBoolean
                ? (document.getElementById(field.id).value === 'sí' ? 1 : 0)
                : parseFloat(document.getElementById(field.id).value) || 0;
            const score = value * field.multiplier;
            document.getElementById(`partial-${field.id}`).innerText = score.toFixed(2);

            if (field.id.startsWith('jcr')) {
                totalScores.jcr += score;
            } else if (field.id.startsWith('scopus')) {
                totalScores.scopus += score;
            } else if (field.id.startsWith('fecyt')) {
                totalScores.fecyt += score;
            } else if (field.id.startsWith('dialnet')) {
                totalScores.dialnet += score;
            } else if (field.id.startsWith('books')) {
                totalScores.books += score;
            } else if (field.id.startsWith('booksEnglish')) {
                totalScores.booksEnglish += score;
            } else if (field.id.startsWith('bookChapters')) {
                totalScores.bookChapters += score;
            } else if (field.id.startsWith('bookChaptersEnglish')) {
                totalScores.bookChaptersEnglish += score;
            } else if (field.id.startsWith('funding')) {
                totalScores.funding += score;
            } else if (field.id.startsWith('patents')) {
                totalScores.patents += score;
            } else if (field.id.startsWith('phdTheses')) {
                totalScores.phdTheses += score;
            } else if (field.id.startsWith('femaleLeader') || field.id.startsWith('youngLeader')) {
                totalScores.coordination += score;
            } else if (field.id.startsWith('universityInstitute')) {
                totalScores.universityInstitute += score;
            }
        });

        document.getElementById('total-jcr').innerText = totalScores.jcr.toFixed(2);
        document.getElementById('total-scopus').innerText = totalScores.scopus.toFixed(2);
        document.getElementById('total-fecyt').innerText = totalScores.fecyt.toFixed(2);
        document.getElementById('total-dialnet').innerText = totalScores.dialnet.toFixed(2);
        document.getElementById('total-books').innerText = totalScores.books.toFixed(2);
        document.getElementById('total-booksEnglish').innerText = totalScores.booksEnglish.toFixed(2);
        document.getElementById('total-bookChapters').innerText = totalScores.bookChapters.toFixed(2);
        document.getElementById('total-bookChaptersEnglish').innerText = totalScores.bookChaptersEnglish.toFixed(2);
        document.getElementById('total-funding').innerText = totalScores.funding.toFixed(2);
        document.getElementById('total-patents').innerText = totalScores.patents.toFixed(2);
        document.getElementById('total-phdTheses').innerText = totalScores.phdTheses.toFixed(2);
        document.getElementById('total-coordination').innerText = totalScores.coordination.toFixed(2);
        document.getElementById('total-universityInstitute').innerText = totalScores.universityInstitute.toFixed(2);

        const finalScore = totalScores.jcr + totalScores.scopus + totalScores.fecyt + totalScores.dialnet + totalScores.books + totalScores.booksEnglish + totalScores.bookChapters + totalScores.bookChaptersEnglish + totalScores.funding + totalScores.patents + totalScores.phdTheses + totalScores.coordination + totalScores.universityInstitute;
        document.getElementById('finalScore').innerText = finalScore.toFixed(2);
    }
</script>
</body>
</html>
